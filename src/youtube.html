<polymer-element name="youtube"
		 attributes="theme width height showinfo loop end color autoplay autohide src enablejsapi">

	<template>
		<template if="{{src == '//www.youtube.com/embed/'}}">
			<p class="youtube-element-error">Inform the url of the video, e g: <code class="youtube-element-code">&lt;youtube src="http://www.youtube.com/embed/M7lc1UVf-VE"&gt;</code></p>
		</template>

		<style>
			.youtube-element-error {
				font-size: 12px; 
				color: #171717;
			}

			.youtube-element-code {
				font-style: italic;
			}
		</style>
	</template>

	<script>
		Polymer('youtube', {
			src         : '//www.youtube.com/embed/',
			theme       : 'dark',
			width       : 500,
			height      : 300,
			showinfo    : 1,
			loop        : 0,
			end         : 0,
			color       : 'red',
			autoplay    : 0,
			autohide    : 2,
			enablejsapi : 1,

			created: function () {
				if (this.src != '//www.youtube.com/embed/') {
					this.createIframe();
				}
			},

			createIframe: function () {
				var iframe = document.createElement('iframe'),
				body = document.getElementsByTagName('body')[0];
				iframe.width = this.width;
				iframe.height = this.height;
				iframe.style.border = 'none';
				iframe.src = '//www.youtube.com/embed/' + this.getVideoID() +
								'?theme=' + this.theme +
								'&amp;showinfo=' + this.showinfo +
								'&amp;loop=' + this.loop +
								'&amp;end=' + this.end +
								'&amp;color=' + this.color +
								'&amp;autoplay=' + this.autoplay +
								'&amp;autohide=' + this.autohide +
								'&amp;enablejsapi=' + this.enablejsapi;
				body.appendChild(iframe);
			},

			getVideoID: function () {
				var splitURL,
					splitCount,
					videoID;

				splitURL = this.src.split('v=');
				if (splitURL.length < 2) {
					splitURL   = this.src.split('/')
				} 

				splitCount = splitURL.length;
				videoID    = splitURL[splitCount - 1];

				return videoID;
			}
		});
	</script>

</polymer-element>